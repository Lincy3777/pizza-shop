<section class="invoice-section ">
    <div class="container mx-auto pt-12">
        <h1 class="font-bold text-xl mb-5">Invoice for Order <%= order._id %></h1>
        
        <!-- Display order details -->
        <table class="w-full table-auto bg-white">
            <thead>
                <tr>
                    <th class="px-5 py-2 text-left">Item</th>
                    <th class="px-5 py-2 text-left">Quantity</th>
                    <th class="px-5 py-2 text-left">Price</th>
                </tr>
            </thead>
           
            <% let total = 0; %>
            <tbody>
                <% Object.keys(order.items).forEach(itemId => { %>
                    <tr>
                        <td class="border px-5 py-2"><%= order.items[itemId].item.name %></td>
                        <td class="border px-5 py-2"><%= order.items[itemId].qty %></td>
                        <td class="border px-5 py-2">
                            <% 
                                const itemTotal = order.items[itemId].item.price * order.items[itemId].qty; 
                                total += itemTotal; // Sum the total
                            %>
                            <%= itemTotal %>
                        </td>
                    </tr>
                <% }) %>
            </tbody>

        </table>
        <h2 class=" text-lg mt-3">Discount: Nil</h2>
        <h2 class=" text-lg mt-3">Tax: ₹ 0</h2>
        <h2 class=" text-lg mt-3">Delivery charges: ₹ 0</h2>
        <hr class="mt-3">
        <h2 class="font-bold text-lg mt-3">Total: ₹ <%= total %></h2>

        <!-- Button to navigate to status tracker -->
        <button class="px-6 py-2 rounded-full text-white font-bold mt-4 mb-12 btn-primary" onclick="location.href='/track-order/<%= order._id %>'">
            Track Order Status
        </button>
    </div>
</section> 